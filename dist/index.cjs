"use strict";var Hn=Object.create;var Zt=Object.defineProperty;var kn=Object.getOwnPropertyDescriptor;var Kn=Object.getOwnPropertyNames;var zn=Object.getPrototypeOf,Jn=Object.prototype.hasOwnProperty;var v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Qn=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Kn(t))!Jn.call(e,i)&&i!==r&&Zt(e,i,{get:()=>t[i],enumerable:!(n=kn(t,i))||n.enumerable});return e};var Xt=(e,t,r)=>(r=e!=null?Hn(zn(e)):{},Qn(t||!e||!e.__esModule?Zt(r,"default",{value:e,enumerable:!0}):r,e));var Ne=v(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.toCommandProperties=me.toCommandValue=void 0;function Yn(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}me.toCommandValue=Yn;function Zn(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}me.toCommandProperties=Zn});var nr=v(W=>{"use strict";var Xn=W&&W.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ei=W&&W.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ti=W&&W.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Xn(t,e,r);return ei(t,e),t};Object.defineProperty(W,"__esModule",{value:!0});W.issue=W.issueCommand=void 0;var ri=ti(require("os")),tr=Ne();function rr(e,t,r){let n=new ut(e,t,r);process.stdout.write(n.toString()+ri.EOL)}W.issueCommand=rr;function ni(e,t=""){rr(e,{},t)}W.issue=ni;var er="::",ut=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=er+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let i=this.properties[n];i&&(r?r=!1:t+=",",t+=`${n}=${si(i)}`)}}return t+=`${er}${ii(this.message)}`,t}};function ii(e){return(0,tr.toCommandValue)(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function si(e){return(0,tr.toCommandValue)(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var or=v(F=>{"use strict";var oi=F&&F.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ai=F&&F.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lt=F&&F.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&oi(t,e,r);return ai(t,e),t};Object.defineProperty(F,"__esModule",{value:!0});F.prepareKeyValueMessage=F.issueFileCommand=void 0;var ui=lt(require("crypto")),ir=lt(require("fs")),ct=lt(require("os")),sr=Ne();function ci(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!ir.existsSync(r))throw new Error(`Missing file at path: ${r}`);ir.appendFileSync(r,`${(0,sr.toCommandValue)(t)}${ct.EOL}`,{encoding:"utf8"})}F.issueFileCommand=ci;function li(e,t){let r=`ghadelimiter_${ui.randomUUID()}`,n=(0,sr.toCommandValue)(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${ct.EOL}${n}${ct.EOL}${r}`}F.prepareKeyValueMessage=li});var ur=v(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.checkBypass=ge.getProxyUrl=void 0;function fi(e){let t=e.protocol==="https:";if(ar(e))return;let r=t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY;if(r)return new URL(r)}ge.getProxyUrl=fi;function ar(e){if(!e.hostname)return!1;let t=e.hostname;if(hi(t))return!0;let r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;let n;e.port?n=Number(e.port):e.protocol==="http:"?n=80:e.protocol==="https:"&&(n=443);let i=[e.hostname.toUpperCase()];typeof n=="number"&&i.push(`${i[0]}:${n}`);for(let s of r.split(",").map(o=>o.trim().toUpperCase()).filter(o=>o))if(s==="*"||i.some(o=>o===s||o.endsWith(`.${s}`)||s.startsWith(".")&&o.endsWith(`${s}`)))return!0;return!1}ge.checkBypass=ar;function hi(e){let t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var hr=v(ve=>{"use strict";var da=require("net"),di=require("tls"),ft=require("http"),cr=require("https"),pi=require("events"),pa=require("assert"),mi=require("util");ve.httpOverHttp=gi;ve.httpsOverHttp=vi;ve.httpOverHttps=_i;ve.httpsOverHttps=yi;function gi(e){var t=new Z(e);return t.request=ft.request,t}function vi(e){var t=new Z(e);return t.request=ft.request,t.createSocket=lr,t.defaultPort=443,t}function _i(e){var t=new Z(e);return t.request=cr.request,t}function yi(e){var t=new Z(e);return t.request=cr.request,t.createSocket=lr,t.defaultPort=443,t}function Z(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||ft.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,i,s,o){for(var c=fr(i,s,o),l=0,a=t.requests.length;l<a;++l){var u=t.requests[l];if(u.host===c.host&&u.port===c.port){t.requests.splice(l,1),u.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}mi.inherits(Z,pi.EventEmitter);Z.prototype.addRequest=function(t,r,n,i){var s=this,o=ht({request:t},s.options,fr(r,n,i));if(s.sockets.length>=this.maxSockets){s.requests.push(o);return}s.createSocket(o,function(c){c.on("free",l),c.on("close",a),c.on("agentRemove",a),t.onSocket(c);function l(){s.emit("free",c,o)}function a(u){s.removeSocket(c),c.removeListener("free",l),c.removeListener("close",a),c.removeListener("agentRemove",a)}})};Z.prototype.createSocket=function(t,r){var n=this,i={};n.sockets.push(i);var s=ht({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),te("making CONNECT request");var o=n.request(s);o.useChunkedEncodingByDefault=!1,o.once("response",c),o.once("upgrade",l),o.once("connect",a),o.once("error",u),o.end();function c(f){f.upgrade=!0}function l(f,p,g){process.nextTick(function(){a(f,p,g)})}function a(f,p,g){if(o.removeAllListeners(),p.removeAllListeners(),f.statusCode!==200){te("tunneling socket could not be established, statusCode=%d",f.statusCode),p.destroy();var w=new Error("tunneling socket could not be established, statusCode="+f.statusCode);w.code="ECONNRESET",t.request.emit("error",w),n.removeSocket(i);return}if(g.length>0){te("got illegal response body from proxy"),p.destroy();var w=new Error("got illegal response body from proxy");w.code="ECONNRESET",t.request.emit("error",w),n.removeSocket(i);return}return te("tunneling connection has established"),n.sockets[n.sockets.indexOf(i)]=p,r(p)}function u(f){o.removeAllListeners(),te(`tunneling socket could not be established, cause=%s
`,f.message,f.stack);var p=new Error("tunneling socket could not be established, cause="+f.message);p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(i)}};Z.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(i){n.request.onSocket(i)})}};function lr(e,t){var r=this;Z.prototype.createSocket.call(r,e,function(n){var i=e.request.getHeader("host"),s=ht({},r.options,{socket:n,servername:i?i.replace(/:.*$/,""):e.host}),o=di.connect(0,s);r.sockets[r.sockets.indexOf(n)]=o,t(o)})}function fr(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function ht(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var i=Object.keys(n),s=0,o=i.length;s<o;++s){var c=i[s];n[c]!==void 0&&(e[c]=n[c])}}return e}var te;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?te=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:te=function(){};ve.debug=te});var pr=v((ga,dr)=>{dr.exports=hr()});var gr=v(y=>{"use strict";var bi=y&&y.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),wi=y&&y.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),We=y&&y.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&bi(t,e,r);return wi(t,e),t},P=y&&y.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.HttpClient=y.isHttps=y.HttpClientResponse=y.HttpClientError=y.getProxyUrl=y.MediaTypes=y.Headers=y.HttpCodes=void 0;var Ie=We(require("http")),dt=We(require("https")),mr=We(ur()),xe=We(pr()),k;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(k=y.HttpCodes||(y.HttpCodes={}));var T;(function(e){e.Accept="accept",e.ContentType="content-type"})(T=y.Headers||(y.Headers={}));var re;(function(e){e.ApplicationJson="application/json"})(re=y.MediaTypes||(y.MediaTypes={}));function Oi(e){let t=mr.getProxyUrl(new URL(e));return t?t.href:""}y.getProxyUrl=Oi;var Si=[k.MovedPermanently,k.ResourceMoved,k.SeeOther,k.TemporaryRedirect,k.PermanentRedirect],Ei=[k.BadGateway,k.ServiceUnavailable,k.GatewayTimeout],Pi=["OPTIONS","GET","DELETE","HEAD"],Ri=10,Ai=5,Le=class e extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,e.prototype)}};y.HttpClientError=Le;var Be=class{constructor(t){this.message=t}readBody(){return P(this,void 0,void 0,function*(){return new Promise(t=>P(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}};y.HttpClientResponse=Be;function ji(e){return new URL(e).protocol==="https:"}y.isHttps=ji;var pt=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return P(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return P(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return P(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return P(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return P(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return P(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return P(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,i){return P(this,void 0,void 0,function*(){return this.request(t,r,n,i)})}getJson(t,r={}){return P(this,void 0,void 0,function*(){r[T.Accept]=this._getExistingOrDefaultHeader(r,T.Accept,re.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return P(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[T.Accept]=this._getExistingOrDefaultHeader(n,T.Accept,re.ApplicationJson),n[T.ContentType]=this._getExistingOrDefaultHeader(n,T.ContentType,re.ApplicationJson);let s=yield this.post(t,i,n);return this._processResponse(s,this.requestOptions)})}putJson(t,r,n={}){return P(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[T.Accept]=this._getExistingOrDefaultHeader(n,T.Accept,re.ApplicationJson),n[T.ContentType]=this._getExistingOrDefaultHeader(n,T.ContentType,re.ApplicationJson);let s=yield this.put(t,i,n);return this._processResponse(s,this.requestOptions)})}patchJson(t,r,n={}){return P(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[T.Accept]=this._getExistingOrDefaultHeader(n,T.Accept,re.ApplicationJson),n[T.ContentType]=this._getExistingOrDefaultHeader(n,T.ContentType,re.ApplicationJson);let s=yield this.patch(t,i,n);return this._processResponse(s,this.requestOptions)})}request(t,r,n,i){return P(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(r),o=this._prepareRequest(t,s,i),c=this._allowRetries&&Pi.includes(t)?this._maxRetries+1:1,l=0,a;do{if(a=yield this.requestRaw(o,n),a&&a.message&&a.message.statusCode===k.Unauthorized){let f;for(let p of this.handlers)if(p.canHandleAuthentication(a)){f=p;break}return f?f.handleAuthentication(this,o,n):a}let u=this._maxRedirects;for(;a.message.statusCode&&Si.includes(a.message.statusCode)&&this._allowRedirects&&u>0;){let f=a.message.headers.location;if(!f)break;let p=new URL(f);if(s.protocol==="https:"&&s.protocol!==p.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield a.readBody(),p.hostname!==s.hostname)for(let g in i)g.toLowerCase()==="authorization"&&delete i[g];o=this._prepareRequest(t,p,i),a=yield this.requestRaw(o,n),u--}if(!a.message.statusCode||!Ei.includes(a.message.statusCode))return a;l+=1,l<c&&(yield a.readBody(),yield this._performExponentialBackoff(l))}while(l<c);return a})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return P(this,void 0,void 0,function*(){return new Promise((n,i)=>{function s(o,c){o?i(o):c?n(c):i(new Error("Unknown error"))}this.requestRawWithCallback(t,r,s)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let i=!1;function s(l,a){i||(i=!0,n(l,a))}let o=t.httpModule.request(t.options,l=>{let a=new Be(l);s(void 0,a)}),c;o.on("socket",l=>{c=l}),o.setTimeout(this._socketTimeout||3*6e4,()=>{c&&c.end(),s(new Error(`Request timeout: ${t.options.path}`))}),o.on("error",function(l){s(l)}),r&&typeof r=="string"&&o.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){o.end()}),r.pipe(o)):o.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let i={};i.parsedUrl=r;let s=i.parsedUrl.protocol==="https:";i.httpModule=s?dt:Ie;let o=s?443:80;if(i.options={},i.options.host=i.parsedUrl.hostname,i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):o,i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||""),i.options.method=t,i.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(i.options.headers["user-agent"]=this.userAgent),i.options.agent=this._getAgent(i.parsedUrl),this.handlers)for(let c of this.handlers)c.prepareRequest(i.options);return i}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Ue(this.requestOptions.headers),Ue(t||{})):Ue(t||{})}_getExistingOrDefaultHeader(t,r,n){let i;return this.requestOptions&&this.requestOptions.headers&&(i=Ue(this.requestOptions.headers)[r]),t[r]||i||n}_getAgent(t){let r,n=mr.getProxyUrl(t),i=n&&n.hostname;if(this._keepAlive&&i&&(r=this._proxyAgent),this._keepAlive&&!i&&(r=this._agent),r)return r;let s=t.protocol==="https:",o=100;if(this.requestOptions&&(o=this.requestOptions.maxSockets||Ie.globalAgent.maxSockets),n&&n.hostname){let c={maxSockets:o,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},l,a=n.protocol==="https:";s?l=a?xe.httpsOverHttps:xe.httpsOverHttp:l=a?xe.httpOverHttps:xe.httpOverHttp,r=l(c),this._proxyAgent=r}if(this._keepAlive&&!r){let c={keepAlive:this._keepAlive,maxSockets:o};r=s?new dt.Agent(c):new Ie.Agent(c),this._agent=r}return r||(r=s?dt.globalAgent:Ie.globalAgent),s&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return P(this,void 0,void 0,function*(){t=Math.min(Ri,t);let r=Ai*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return P(this,void 0,void 0,function*(){return new Promise((n,i)=>P(this,void 0,void 0,function*(){let s=t.message.statusCode||0,o={statusCode:s,result:null,headers:{}};s===k.NotFound&&n(o);function c(u,f){if(typeof f=="string"){let p=new Date(f);if(!isNaN(p.valueOf()))return p}return f}let l,a;try{a=yield t.readBody(),a&&a.length>0&&(r&&r.deserializeDates?l=JSON.parse(a,c):l=JSON.parse(a),o.result=l),o.headers=t.message.headers}catch{}if(s>299){let u;l&&l.message?u=l.message:a&&a.length>0?u=a:u=`Failed request: (${s})`;let f=new Le(u,s);f.result=o.result,i(f)}else n(o)}))})}};y.HttpClient=pt;var Ue=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var vr=v(z=>{"use strict";var _t=z&&z.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(z,"__esModule",{value:!0});z.PersonalAccessTokenCredentialHandler=z.BearerCredentialHandler=z.BasicCredentialHandler=void 0;var mt=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return _t(this,void 0,void 0,function*(){throw new Error("not implemented")})}};z.BasicCredentialHandler=mt;var gt=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return _t(this,void 0,void 0,function*(){throw new Error("not implemented")})}};z.BearerCredentialHandler=gt;var vt=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return _t(this,void 0,void 0,function*(){throw new Error("not implemented")})}};z.PersonalAccessTokenCredentialHandler=vt});var br=v(_e=>{"use strict";var _r=_e&&_e.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(_e,"__esModule",{value:!0});_e.OidcClient=void 0;var Mi=gr(),Ti=vr(),yr=ye(),yt=class e{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new Mi.HttpClient("actions/oidc-client",[new Ti.BearerCredentialHandler(e.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return _r(this,void 0,void 0,function*(){let s=(r=(yield e.createHttpClient().getJson(t).catch(o=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${o.statusCode}
 
        Error Message: ${o.message}`)})).result)===null||r===void 0?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(t){return _r(this,void 0,void 0,function*(){try{let r=e.getIDTokenUrl();if(t){let i=encodeURIComponent(t);r=`${r}&audience=${i}`}(0,yr.debug)(`ID token url is ${r}`);let n=yield e.getCall(r);return(0,yr.setSecret)(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};_e.OidcClient=yt});var St=v(D=>{"use strict";var bt=D&&D.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(D,"__esModule",{value:!0});D.summary=D.markdownSummary=D.SUMMARY_DOCS_URL=D.SUMMARY_ENV_VAR=void 0;var Di=require("os"),wt=require("fs"),{access:qi,appendFile:$i,writeFile:Ci}=wt.promises;D.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";D.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Ot=class{constructor(){this._buffer=""}filePath(){return bt(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[D.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${D.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield qi(t,wt.constants.R_OK|wt.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let i=Object.entries(n).map(([s,o])=>` ${s}="${o}"`).join("");return r?`<${t}${i}>${r}</${t}>`:`<${t}${i}>`}write(t){return bt(this,void 0,void 0,function*(){let r=!!t?.overwrite,n=yield this.filePath();return yield(r?Ci:$i)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return bt(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(Di.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),i=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(i).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",i=t.map(o=>this.wrap("li",o)).join(""),s=this.wrap(n,i);return this.addRaw(s).addEOL()}addTable(t){let r=t.map(i=>{let s=i.map(o=>{if(typeof o=="string")return this.wrap("td",o);let{header:c,data:l,colspan:a,rowspan:u}=o,f=c?"th":"td",p=Object.assign(Object.assign({},a&&{colspan:a}),u&&{rowspan:u});return this.wrap(f,l,p)}).join("");return this.wrap("tr",s)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:i,height:s}=n||{},o=Object.assign(Object.assign({},i&&{width:i}),s&&{height:s}),c=this.wrap("img",null,Object.assign({src:t,alt:r},o));return this.addRaw(c).addEOL()}addHeading(t,r){let n=`h${r}`,i=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",s=this.wrap(i,t);return this.addRaw(s).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),i=this.wrap("blockquote",t,n);return this.addRaw(i).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},wr=new Ot;D.markdownSummary=wr;D.summary=wr});var Or=v(q=>{"use strict";var Ni=q&&q.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ii=q&&q.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),xi=q&&q.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Ni(t,e,r);return Ii(t,e),t};Object.defineProperty(q,"__esModule",{value:!0});q.toPlatformPath=q.toWin32Path=q.toPosixPath=void 0;var Ui=xi(require("path"));function Li(e){return e.replace(/[\\]/g,"/")}q.toPosixPath=Li;function Bi(e){return e.replace(/[/]/g,"\\")}q.toWin32Path=Bi;function Wi(e){return e.replace(/[/\\]/g,Ui.sep)}q.toPlatformPath=Wi});var Pt=v(d=>{"use strict";var Fi=d&&d.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Vi=d&&d.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Er=d&&d.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Fi(t,e,r);return Vi(t,e),t},Et=d&&d.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})},$;Object.defineProperty(d,"__esModule",{value:!0});d.getCmdPath=d.tryGetExecutablePath=d.isRooted=d.isDirectory=d.exists=d.READONLY=d.UV_FS_O_EXLOCK=d.IS_WINDOWS=d.unlink=d.symlink=d.stat=d.rmdir=d.rm=d.rename=d.readlink=d.readdir=d.open=d.mkdir=d.lstat=d.copyFile=d.chmod=void 0;var Pr=Er(require("fs")),Fe=Er(require("path"));$=Pr.promises,d.chmod=$.chmod,d.copyFile=$.copyFile,d.lstat=$.lstat,d.mkdir=$.mkdir,d.open=$.open,d.readdir=$.readdir,d.readlink=$.readlink,d.rename=$.rename,d.rm=$.rm,d.rmdir=$.rmdir,d.stat=$.stat,d.symlink=$.symlink,d.unlink=$.unlink;d.IS_WINDOWS=process.platform==="win32";d.UV_FS_O_EXLOCK=268435456;d.READONLY=Pr.constants.O_RDONLY;function Gi(e){return Et(this,void 0,void 0,function*(){try{yield d.stat(e)}catch(t){if(t.code==="ENOENT")return!1;throw t}return!0})}d.exists=Gi;function Hi(e,t=!1){return Et(this,void 0,void 0,function*(){return(t?yield d.stat(e):yield d.lstat(e)).isDirectory()})}d.isDirectory=Hi;function ki(e){if(e=zi(e),!e)throw new Error('isRooted() parameter "p" cannot be empty');return d.IS_WINDOWS?e.startsWith("\\")||/^[A-Z]:/i.test(e):e.startsWith("/")}d.isRooted=ki;function Ki(e,t){return Et(this,void 0,void 0,function*(){let r;try{r=yield d.stat(e)}catch(i){i.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${i}`)}if(r&&r.isFile()){if(d.IS_WINDOWS){let i=Fe.extname(e).toUpperCase();if(t.some(s=>s.toUpperCase()===i))return e}else if(Sr(r))return e}let n=e;for(let i of t){e=n+i,r=void 0;try{r=yield d.stat(e)}catch(s){s.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${s}`)}if(r&&r.isFile()){if(d.IS_WINDOWS){try{let s=Fe.dirname(e),o=Fe.basename(e).toUpperCase();for(let c of yield d.readdir(s))if(o===c.toUpperCase()){e=Fe.join(s,c);break}}catch(s){console.log(`Unexpected error attempting to determine the actual case of the file '${e}': ${s}`)}return e}else if(Sr(r))return e}}return""})}d.tryGetExecutablePath=Ki;function zi(e){return e=e||"",d.IS_WINDOWS?(e=e.replace(/\//g,"\\"),e.replace(/\\\\+/g,"\\")):e.replace(/\/\/+/g,"/")}function Sr(e){return(e.mode&1)>0||(e.mode&8)>0&&e.gid===process.getgid()||(e.mode&64)>0&&e.uid===process.getuid()}function Ji(){var e;return(e=process.env.COMSPEC)!==null&&e!==void 0?e:"cmd.exe"}d.getCmdPath=Ji});var qr=v(S=>{"use strict";var Qi=S&&S.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Yi=S&&S.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Rr=S&&S.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Qi(t,e,r);return Yi(t,e),t},ne=S&&S.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(S,"__esModule",{value:!0});S.findInPath=S.which=S.mkdirP=S.rmRF=S.mv=S.cp=void 0;var Zi=require("assert"),J=Rr(require("path")),_=Rr(Pt());function Xi(e,t,r={}){return ne(this,void 0,void 0,function*(){let{force:n,recursive:i,copySourceDirectory:s}=ts(r),o=(yield _.exists(t))?yield _.stat(t):null;if(o&&o.isFile()&&!n)return;let c=o&&o.isDirectory()&&s?J.join(t,J.basename(e)):t;if(!(yield _.exists(e)))throw new Error(`no such file or directory: ${e}`);if((yield _.stat(e)).isDirectory())if(i)yield Tr(e,c,0,n);else throw new Error(`Failed to copy. ${e} is a directory, but tried to copy without recursive flag.`);else{if(J.relative(e,c)==="")throw new Error(`'${c}' and '${e}' are the same file`);yield Dr(e,c,n)}})}S.cp=Xi;function es(e,t,r={}){return ne(this,void 0,void 0,function*(){if(yield _.exists(t)){let n=!0;if((yield _.isDirectory(t))&&(t=J.join(t,J.basename(e)),n=yield _.exists(t)),n)if(r.force==null||r.force)yield Ar(t);else throw new Error("Destination already exists")}yield Rt(J.dirname(t)),yield _.rename(e,t)})}S.mv=es;function Ar(e){return ne(this,void 0,void 0,function*(){if(_.IS_WINDOWS&&/[*"<>|]/.test(e))throw new Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows');try{yield _.rm(e,{force:!0,maxRetries:3,recursive:!0,retryDelay:300})}catch(t){throw new Error(`File was unable to be removed ${t}`)}})}S.rmRF=Ar;function Rt(e){return ne(this,void 0,void 0,function*(){Zi.ok(e,"a path argument must be provided"),yield _.mkdir(e,{recursive:!0})})}S.mkdirP=Rt;function jr(e,t){return ne(this,void 0,void 0,function*(){if(!e)throw new Error("parameter 'tool' is required");if(t){let n=yield jr(e,!1);if(!n)throw _.IS_WINDOWS?new Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`);return n}let r=yield Mr(e);return r&&r.length>0?r[0]:""})}S.which=jr;function Mr(e){return ne(this,void 0,void 0,function*(){if(!e)throw new Error("parameter 'tool' is required");let t=[];if(_.IS_WINDOWS&&process.env.PATHEXT)for(let i of process.env.PATHEXT.split(J.delimiter))i&&t.push(i);if(_.isRooted(e)){let i=yield _.tryGetExecutablePath(e,t);return i?[i]:[]}if(e.includes(J.sep))return[];let r=[];if(process.env.PATH)for(let i of process.env.PATH.split(J.delimiter))i&&r.push(i);let n=[];for(let i of r){let s=yield _.tryGetExecutablePath(J.join(i,e),t);s&&n.push(s)}return n})}S.findInPath=Mr;function ts(e){let t=e.force==null?!0:e.force,r=!!e.recursive,n=e.copySourceDirectory==null?!0:!!e.copySourceDirectory;return{force:t,recursive:r,copySourceDirectory:n}}function Tr(e,t,r,n){return ne(this,void 0,void 0,function*(){if(r>=255)return;r++,yield Rt(t);let i=yield _.readdir(e);for(let s of i){let o=`${e}/${s}`,c=`${t}/${s}`;(yield _.lstat(o)).isDirectory()?yield Tr(o,c,r,n):yield Dr(o,c,n)}yield _.chmod(t,(yield _.stat(e)).mode)})}function Dr(e,t,r){return ne(this,void 0,void 0,function*(){if((yield _.lstat(e)).isSymbolicLink()){try{yield _.lstat(t),yield _.unlink(t)}catch(i){i.code==="EPERM"&&(yield _.chmod(t,"0666"),yield _.unlink(t))}let n=yield _.readlink(e);yield _.symlink(n,t,_.IS_WINDOWS?"junction":null)}else(!(yield _.exists(t))||r)&&(yield _.copyFile(e,t))})}});var Ir=v(C=>{"use strict";var rs=C&&C.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ns=C&&C.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),be=C&&C.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&rs(t,e,r);return ns(t,e),t},$r=C&&C.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(C,"__esModule",{value:!0});C.argStringToArray=C.ToolRunner=void 0;var Ve=be(require("os")),Nr=be(require("events")),is=be(require("child_process")),ss=be(require("path")),os=be(qr()),Cr=be(Pt()),as=require("timers"),Ge=process.platform==="win32",At=class extends Nr.EventEmitter{constructor(t,r,n){if(super(),!t)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=t,this.args=r||[],this.options=n||{}}_debug(t){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(t)}_getCommandString(t,r){let n=this._getSpawnFileName(),i=this._getSpawnArgs(t),s=r?"":"[command]";if(Ge)if(this._isCmdFile()){s+=n;for(let o of i)s+=` ${o}`}else if(t.windowsVerbatimArguments){s+=`"${n}"`;for(let o of i)s+=` ${o}`}else{s+=this._windowsQuoteCmdArg(n);for(let o of i)s+=` ${this._windowsQuoteCmdArg(o)}`}else{s+=n;for(let o of i)s+=` ${o}`}return s}_processLineBuffer(t,r,n){try{let i=r+t.toString(),s=i.indexOf(Ve.EOL);for(;s>-1;){let o=i.substring(0,s);n(o),i=i.substring(s+Ve.EOL.length),s=i.indexOf(Ve.EOL)}return i}catch(i){return this._debug(`error processing line. Failed with error ${i}`),""}}_getSpawnFileName(){return Ge&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(t){if(Ge&&this._isCmdFile()){let r=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(let n of this.args)r+=" ",r+=t.windowsVerbatimArguments?n:this._windowsQuoteCmdArg(n);return r+='"',[r]}return this.args}_endsWith(t,r){return t.endsWith(r)}_isCmdFile(){let t=this.toolPath.toUpperCase();return this._endsWith(t,".CMD")||this._endsWith(t,".BAT")}_windowsQuoteCmdArg(t){if(!this._isCmdFile())return this._uvQuoteCmdArg(t);if(!t)return'""';let r=[" ","	","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'],n=!1;for(let o of t)if(r.some(c=>c===o)){n=!0;break}if(!n)return t;let i='"',s=!0;for(let o=t.length;o>0;o--)i+=t[o-1],s&&t[o-1]==="\\"?i+="\\":t[o-1]==='"'?(s=!0,i+='"'):s=!1;return i+='"',i.split("").reverse().join("")}_uvQuoteCmdArg(t){if(!t)return'""';if(!t.includes(" ")&&!t.includes("	")&&!t.includes('"'))return t;if(!t.includes('"')&&!t.includes("\\"))return`"${t}"`;let r='"',n=!0;for(let i=t.length;i>0;i--)r+=t[i-1],n&&t[i-1]==="\\"?r+="\\":t[i-1]==='"'?(n=!0,r+="\\"):n=!1;return r+='"',r.split("").reverse().join("")}_cloneExecOptions(t){t=t||{};let r={cwd:t.cwd||process.cwd(),env:t.env||process.env,silent:t.silent||!1,windowsVerbatimArguments:t.windowsVerbatimArguments||!1,failOnStdErr:t.failOnStdErr||!1,ignoreReturnCode:t.ignoreReturnCode||!1,delay:t.delay||1e4};return r.outStream=t.outStream||process.stdout,r.errStream=t.errStream||process.stderr,r}_getSpawnOptions(t,r){t=t||{};let n={};return n.cwd=t.cwd,n.env=t.env,n.windowsVerbatimArguments=t.windowsVerbatimArguments||this._isCmdFile(),t.windowsVerbatimArguments&&(n.argv0=`"${r}"`),n}exec(){return $r(this,void 0,void 0,function*(){return!Cr.isRooted(this.toolPath)&&(this.toolPath.includes("/")||Ge&&this.toolPath.includes("\\"))&&(this.toolPath=ss.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)),this.toolPath=yield os.which(this.toolPath,!0),new Promise((t,r)=>$r(this,void 0,void 0,function*(){this._debug(`exec tool: ${this.toolPath}`),this._debug("arguments:");for(let a of this.args)this._debug(`   ${a}`);let n=this._cloneExecOptions(this.options);!n.silent&&n.outStream&&n.outStream.write(this._getCommandString(n)+Ve.EOL);let i=new jt(n,this.toolPath);if(i.on("debug",a=>{this._debug(a)}),this.options.cwd&&!(yield Cr.exists(this.options.cwd)))return r(new Error(`The cwd: ${this.options.cwd} does not exist!`));let s=this._getSpawnFileName(),o=is.spawn(s,this._getSpawnArgs(n),this._getSpawnOptions(this.options,s)),c="";o.stdout&&o.stdout.on("data",a=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(a),!n.silent&&n.outStream&&n.outStream.write(a),c=this._processLineBuffer(a,c,u=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(u)})});let l="";if(o.stderr&&o.stderr.on("data",a=>{i.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(a),!n.silent&&n.errStream&&n.outStream&&(n.failOnStdErr?n.errStream:n.outStream).write(a),l=this._processLineBuffer(a,l,u=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(u)})}),o.on("error",a=>{i.processError=a.message,i.processExited=!0,i.processClosed=!0,i.CheckComplete()}),o.on("exit",a=>{i.processExitCode=a,i.processExited=!0,this._debug(`Exit code ${a} received from tool '${this.toolPath}'`),i.CheckComplete()}),o.on("close",a=>{i.processExitCode=a,i.processExited=!0,i.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),i.CheckComplete()}),i.on("done",(a,u)=>{c.length>0&&this.emit("stdline",c),l.length>0&&this.emit("errline",l),o.removeAllListeners(),a?r(a):t(u)}),this.options.input){if(!o.stdin)throw new Error("child process missing stdin");o.stdin.end(this.options.input)}}))})}};C.ToolRunner=At;function us(e){let t=[],r=!1,n=!1,i="";function s(o){n&&o!=='"'&&(i+="\\"),i+=o,n=!1}for(let o=0;o<e.length;o++){let c=e.charAt(o);if(c==='"'){n?s(c):r=!r;continue}if(c==="\\"&&n){s(c);continue}if(c==="\\"&&r){n=!0;continue}if(c===" "&&!r){i.length>0&&(t.push(i),i="");continue}s(c)}return i.length>0&&t.push(i.trim()),t}C.argStringToArray=us;var jt=class e extends Nr.EventEmitter{constructor(t,r){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!r)throw new Error("toolPath must not be empty");this.options=t,this.toolPath=r,t.delay&&(this.delay=t.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=as.setTimeout(e.HandleTimeout,this.delay,this)))}_debug(t){this.emit("debug",t)}_setResult(){let t;this.processExited&&(this.processError?t=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):this.processExitCode!==0&&!this.options.ignoreReturnCode?t=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`):this.processStderr&&this.options.failOnStdErr&&(t=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`))),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",t,this.processExitCode)}static HandleTimeout(t){if(!t.done){if(!t.processClosed&&t.processExited){let r=`The STDIO streams did not close within ${t.delay/1e3} seconds of the exit event from process '${t.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;t._debug(r)}t._setResult()}}}});var Wr=v(N=>{"use strict";var cs=N&&N.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ls=N&&N.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),fs=N&&N.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&cs(t,e,r);return ls(t,e),t},Lr=N&&N.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(N,"__esModule",{value:!0});N.getExecOutput=N.exec=void 0;var xr=require("string_decoder"),Ur=fs(Ir());function Br(e,t,r){return Lr(this,void 0,void 0,function*(){let n=Ur.argStringToArray(e);if(n.length===0)throw new Error("Parameter 'commandLine' cannot be null or empty.");let i=n[0];return t=n.slice(1).concat(t||[]),new Ur.ToolRunner(i,t,r).exec()})}N.exec=Br;function hs(e,t,r){var n,i;return Lr(this,void 0,void 0,function*(){let s="",o="",c=new xr.StringDecoder("utf8"),l=new xr.StringDecoder("utf8"),a=(n=r?.listeners)===null||n===void 0?void 0:n.stdout,u=(i=r?.listeners)===null||i===void 0?void 0:i.stderr,f=b=>{o+=l.write(b),u&&u(b)},p=b=>{s+=c.write(b),a&&a(b)},g=Object.assign(Object.assign({},r?.listeners),{stdout:p,stderr:f}),w=yield Br(e,t,Object.assign(Object.assign({},r),{listeners:g}));return s+=c.end(),o+=l.end(),{exitCode:w,stdout:s,stderr:o}})}N.getExecOutput=hs});var Vr=v(m=>{"use strict";var ds=m&&m.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ps=m&&m.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ms=m&&m.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&ds(t,e,r);return ps(t,e),t},ke=m&&m.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})},gs=m&&m.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(m,"__esModule",{value:!0});m.getDetails=m.isLinux=m.isMacOS=m.isWindows=m.arch=m.platform=void 0;var Fr=gs(require("os")),He=ms(Wr()),vs=()=>ke(void 0,void 0,void 0,function*(){let{stdout:e}=yield He.getExecOutput('powershell -command "(Get-CimInstance -ClassName Win32_OperatingSystem).Version"',void 0,{silent:!0}),{stdout:t}=yield He.getExecOutput('powershell -command "(Get-CimInstance -ClassName Win32_OperatingSystem).Caption"',void 0,{silent:!0});return{name:t.trim(),version:e.trim()}}),_s=()=>ke(void 0,void 0,void 0,function*(){var e,t,r,n;let{stdout:i}=yield He.getExecOutput("sw_vers",void 0,{silent:!0}),s=(t=(e=i.match(/ProductVersion:\s*(.+)/))===null||e===void 0?void 0:e[1])!==null&&t!==void 0?t:"";return{name:(n=(r=i.match(/ProductName:\s*(.+)/))===null||r===void 0?void 0:r[1])!==null&&n!==void 0?n:"",version:s}}),ys=()=>ke(void 0,void 0,void 0,function*(){let{stdout:e}=yield He.getExecOutput("lsb_release",["-i","-r","-s"],{silent:!0}),[t,r]=e.trim().split(`
`);return{name:t,version:r}});m.platform=Fr.default.platform();m.arch=Fr.default.arch();m.isWindows=m.platform==="win32";m.isMacOS=m.platform==="darwin";m.isLinux=m.platform==="linux";function bs(){return ke(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield m.isWindows?vs():m.isMacOS?_s():ys()),{platform:m.platform,arch:m.arch,isWindows:m.isWindows,isMacOS:m.isMacOS,isLinux:m.isLinux})})}m.getDetails=bs});var ye=v(h=>{"use strict";var ws=h&&h.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Os=h&&h.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Tt=h&&h.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&ws(t,e,r);return Os(t,e),t},Gr=h&&h.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});h.platform=h.toPlatformPath=h.toWin32Path=h.toPosixPath=h.markdownSummary=h.summary=h.getIDToken=h.getState=h.saveState=h.group=h.endGroup=h.startGroup=h.info=h.notice=h.warning=h.error=h.debug=h.isDebug=h.setFailed=h.setCommandEcho=h.setOutput=h.getBooleanInput=h.getMultilineInput=h.getInput=h.addPath=h.setSecret=h.exportVariable=h.ExitCode=void 0;var V=nr(),le=or(),we=Ne(),Hr=Tt(require("os")),Ss=Tt(require("path")),Es=br(),Mt;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Mt||(h.ExitCode=Mt={}));function Ps(e,t){let r=(0,we.toCommandValue)(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return(0,le.issueFileCommand)("ENV",(0,le.prepareKeyValueMessage)(e,t));(0,V.issueCommand)("set-env",{name:e},r)}h.exportVariable=Ps;function Rs(e){(0,V.issueCommand)("add-mask",{},e)}h.setSecret=Rs;function As(e){process.env.GITHUB_PATH||""?(0,le.issueFileCommand)("PATH",e):(0,V.issueCommand)("add-path",{},e),process.env.PATH=`${e}${Ss.delimiter}${process.env.PATH}`}h.addPath=As;function Dt(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}h.getInput=Dt;function js(e,t){let r=Dt(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}h.getMultilineInput=js;function Ms(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],i=Dt(e,t);if(r.includes(i))return!0;if(n.includes(i))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}h.getBooleanInput=Ms;function Ts(e,t){if(process.env.GITHUB_OUTPUT||"")return(0,le.issueFileCommand)("OUTPUT",(0,le.prepareKeyValueMessage)(e,t));process.stdout.write(Hr.EOL),(0,V.issueCommand)("set-output",{name:e},(0,we.toCommandValue)(t))}h.setOutput=Ts;function Ds(e){(0,V.issue)("echo",e?"on":"off")}h.setCommandEcho=Ds;function qs(e){process.exitCode=Mt.Failure,kr(e)}h.setFailed=qs;function $s(){return process.env.RUNNER_DEBUG==="1"}h.isDebug=$s;function Cs(e){(0,V.issueCommand)("debug",{},e)}h.debug=Cs;function kr(e,t={}){(0,V.issueCommand)("error",(0,we.toCommandProperties)(t),e instanceof Error?e.toString():e)}h.error=kr;function Ns(e,t={}){(0,V.issueCommand)("warning",(0,we.toCommandProperties)(t),e instanceof Error?e.toString():e)}h.warning=Ns;function Is(e,t={}){(0,V.issueCommand)("notice",(0,we.toCommandProperties)(t),e instanceof Error?e.toString():e)}h.notice=Is;function xs(e){process.stdout.write(e+Hr.EOL)}h.info=xs;function Kr(e){(0,V.issue)("group",e)}h.startGroup=Kr;function zr(){(0,V.issue)("endgroup")}h.endGroup=zr;function Us(e,t){return Gr(this,void 0,void 0,function*(){Kr(e);let r;try{r=yield t()}finally{zr()}return r})}h.group=Us;function Ls(e,t){if(process.env.GITHUB_STATE||"")return(0,le.issueFileCommand)("STATE",(0,le.prepareKeyValueMessage)(e,t));(0,V.issueCommand)("save-state",{name:e},(0,we.toCommandValue)(t))}h.saveState=Ls;function Bs(e){return process.env[`STATE_${e}`]||""}h.getState=Bs;function Ws(e){return Gr(this,void 0,void 0,function*(){return yield Es.OidcClient.getIDToken(e)})}h.getIDToken=Ws;var Fs=St();Object.defineProperty(h,"summary",{enumerable:!0,get:function(){return Fs.summary}});var Vs=St();Object.defineProperty(h,"markdownSummary",{enumerable:!0,get:function(){return Vs.markdownSummary}});var qt=Or();Object.defineProperty(h,"toPosixPath",{enumerable:!0,get:function(){return qt.toPosixPath}});Object.defineProperty(h,"toWin32Path",{enumerable:!0,get:function(){return qt.toWin32Path}});Object.defineProperty(h,"toPlatformPath",{enumerable:!0,get:function(){return qt.toPlatformPath}});h.platform=Tt(Vr())});var Jr=v(Q=>{"use strict";var Gs=Q&&Q.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Hs=Q&&Q.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ks=Q&&Q.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Gs(t,e,r);return Hs(t,e),t};Object.defineProperty(Q,"__esModule",{value:!0});Q.getOptions=void 0;var Pe=ks(ye());function Ks(e){let t={followSymbolicLinks:!0,implicitDescendants:!0,matchDirectories:!0,omitBrokenSymbolicLinks:!0,excludeHiddenFiles:!1};return e&&(typeof e.followSymbolicLinks=="boolean"&&(t.followSymbolicLinks=e.followSymbolicLinks,Pe.debug(`followSymbolicLinks '${t.followSymbolicLinks}'`)),typeof e.implicitDescendants=="boolean"&&(t.implicitDescendants=e.implicitDescendants,Pe.debug(`implicitDescendants '${t.implicitDescendants}'`)),typeof e.matchDirectories=="boolean"&&(t.matchDirectories=e.matchDirectories,Pe.debug(`matchDirectories '${t.matchDirectories}'`)),typeof e.omitBrokenSymbolicLinks=="boolean"&&(t.omitBrokenSymbolicLinks=e.omitBrokenSymbolicLinks,Pe.debug(`omitBrokenSymbolicLinks '${t.omitBrokenSymbolicLinks}'`)),typeof e.excludeHiddenFiles=="boolean"&&(t.excludeHiddenFiles=e.excludeHiddenFiles,Pe.debug(`excludeHiddenFiles '${t.excludeHiddenFiles}'`))),t}Q.getOptions=Ks});var ze=v(E=>{"use strict";var zs=E&&E.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Js=E&&E.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Qs=E&&E.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&zs(t,e,r);return Js(t,e),t},Ys=E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(E,"__esModule",{value:!0});E.safeTrimTrailingSeparator=E.normalizeSeparators=E.hasRoot=E.hasAbsoluteRoot=E.ensureAbsoluteRoot=E.dirname=void 0;var Ke=Qs(require("path")),fe=Ys(require("assert")),ie=process.platform==="win32";function Zs(e){if(e=Ct(e),ie&&/^\\\\[^\\]+(\\[^\\]+)?$/.test(e))return e;let t=Ke.dirname(e);return ie&&/^\\\\[^\\]+\\[^\\]+\\$/.test(t)&&(t=Ct(t)),t}E.dirname=Zs;function Xs(e,t){if((0,fe.default)(e,"ensureAbsoluteRoot parameter 'root' must not be empty"),(0,fe.default)(t,"ensureAbsoluteRoot parameter 'itemPath' must not be empty"),$t(t))return t;if(ie){if(t.match(/^[A-Z]:[^\\/]|^[A-Z]:$/i)){let r=process.cwd();return(0,fe.default)(r.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${r}'`),t[0].toUpperCase()===r[0].toUpperCase()?t.length===2?`${t[0]}:\\${r.substr(3)}`:(r.endsWith("\\")||(r+="\\"),`${t[0]}:\\${r.substr(3)}${t.substr(2)}`):`${t[0]}:\\${t.substr(2)}`}else if(Re(t).match(/^\\$|^\\[^\\]/)){let r=process.cwd();return(0,fe.default)(r.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${r}'`),`${r[0]}:\\${t.substr(1)}`}}return(0,fe.default)($t(e),"ensureAbsoluteRoot parameter 'root' must have an absolute root"),e.endsWith("/")||ie&&e.endsWith("\\")||(e+=Ke.sep),e+t}E.ensureAbsoluteRoot=Xs;function $t(e){return(0,fe.default)(e,"hasAbsoluteRoot parameter 'itemPath' must not be empty"),e=Re(e),ie?e.startsWith("\\\\")||/^[A-Z]:\\/i.test(e):e.startsWith("/")}E.hasAbsoluteRoot=$t;function eo(e){return(0,fe.default)(e,"isRooted parameter 'itemPath' must not be empty"),e=Re(e),ie?e.startsWith("\\")||/^[A-Z]:/i.test(e):e.startsWith("/")}E.hasRoot=eo;function Re(e){return e=e||"",ie?(e=e.replace(/\//g,"\\"),(/^\\\\+[^\\]/.test(e)?"\\":"")+e.replace(/\\\\+/g,"\\")):e.replace(/\/\/+/g,"/")}E.normalizeSeparators=Re;function Ct(e){return e?(e=Re(e),!e.endsWith(Ke.sep)||e===Ke.sep||ie&&/^[A-Z]:\\$/i.test(e)?e:e.substr(0,e.length-1)):""}E.safeTrimTrailingSeparator=Ct});var Qe=v(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.MatchKind=void 0;var Qr;(function(e){e[e.None=0]="None",e[e.Directory=1]="Directory",e[e.File=2]="File",e[e.All=3]="All"})(Qr||(Je.MatchKind=Qr={}))});var Xr=v(I=>{"use strict";var to=I&&I.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ro=I&&I.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),no=I&&I.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&to(t,e,r);return ro(t,e),t};Object.defineProperty(I,"__esModule",{value:!0});I.partialMatch=I.match=I.getSearchPaths=void 0;var Yr=no(ze()),io=Qe(),Zr=process.platform==="win32";function so(e){e=e.filter(n=>!n.negate);let t={};for(let n of e){let i=Zr?n.searchPath.toUpperCase():n.searchPath;t[i]="candidate"}let r=[];for(let n of e){let i=Zr?n.searchPath.toUpperCase():n.searchPath;if(t[i]==="included")continue;let s=!1,o=i,c=Yr.dirname(o);for(;c!==o;){if(t[c]){s=!0;break}o=c,c=Yr.dirname(o)}s||(r.push(n.searchPath),t[i]="included")}return r}I.getSearchPaths=so;function oo(e,t){let r=io.MatchKind.None;for(let n of e)n.negate?r&=~n.match(t):r|=n.match(t);return r}I.match=oo;function ao(e,t){return e.some(r=>!r.negate&&r.partialMatch(t))}I.partialMatch=ao});var tn=v((qa,en)=>{en.exports=function(e,t){for(var r=[],n=0;n<e.length;n++){var i=t(e[n],n);uo(i)?r.push.apply(r,i):r.push(i)}return r};var uo=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var an=v(($a,on)=>{"use strict";on.exports=nn;function nn(e,t,r){e instanceof RegExp&&(e=rn(e,r)),t instanceof RegExp&&(t=rn(t,r));var n=sn(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function rn(e,t){var r=t.match(e);return r?r[0]:null}nn.range=sn;function sn(e,t,r){var n,i,s,o,c,l=r.indexOf(e),a=r.indexOf(t,l+1),u=l;if(l>=0&&a>0){if(e===t)return[l,a];for(n=[],s=r.length;u>=0&&!c;)u==l?(n.push(u),l=r.indexOf(e,u+1)):n.length==1?c=[n.pop(),a]:(i=n.pop(),i<s&&(s=i,o=a),a=r.indexOf(t,u+1)),u=l<a&&l>=0?l:a;n.length&&(c=[s,o])}return c}});var mn=v((Ca,pn)=>{var co=tn(),un=an();pn.exports=ho;var cn="\0SLASH"+Math.random()+"\0",ln="\0OPEN"+Math.random()+"\0",It="\0CLOSE"+Math.random()+"\0",fn="\0COMMA"+Math.random()+"\0",hn="\0PERIOD"+Math.random()+"\0";function Nt(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function lo(e){return e.split("\\\\").join(cn).split("\\{").join(ln).split("\\}").join(It).split("\\,").join(fn).split("\\.").join(hn)}function fo(e){return e.split(cn).join("\\").split(ln).join("{").split(It).join("}").split(fn).join(",").split(hn).join(".")}function dn(e){if(!e)return[""];var t=[],r=un("{","}",e);if(!r)return e.split(",");var n=r.pre,i=r.body,s=r.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var c=dn(s);return s.length&&(o[o.length-1]+=c.shift(),o.push.apply(o,c)),t.push.apply(t,o),t}function ho(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),Oe(lo(e),!0).map(fo)):[]}function po(e){return"{"+e+"}"}function mo(e){return/^-?0\d/.test(e)}function go(e,t){return e<=t}function vo(e,t){return e>=t}function Oe(e,t){var r=[],n=un("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),o=i||s,c=n.body.indexOf(",")>=0;if(!o&&!c)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+It+n.post,Oe(e)):[e];var l;if(o)l=n.body.split(/\.\./);else if(l=dn(n.body),l.length===1&&(l=Oe(l[0],!1).map(po),l.length===1)){var u=n.post.length?Oe(n.post,!1):[""];return u.map(function(it){return n.pre+l[0]+it})}var a=n.pre,u=n.post.length?Oe(n.post,!1):[""],f;if(o){var p=Nt(l[0]),g=Nt(l[1]),w=Math.max(l[0].length,l[1].length),b=l.length==3?Math.abs(Nt(l[2])):1,L=go,O=g<p;O&&(b*=-1,L=vo);var R=l.some(mo);f=[];for(var K=p;L(K,g);K+=b){var M;if(s)M=String.fromCharCode(K),M==="\\"&&(M="");else if(M=String(K),R){var ee=w-M.length;if(ee>0){var $e=new Array(ee+1).join("0");K<0?M="-"+$e+M.slice(1):M=$e+M}}f.push(M)}}else f=co(l,function(Ce){return Oe(Ce,!1)});for(var pe=0;pe<f.length;pe++)for(var ce=0;ce<u.length;ce++){var Y=a+f[pe]+u[ce];(!t||o||Y)&&r.push(Y)}return r}});var wn=v((Na,bn)=>{bn.exports=B;B.Minimatch=j;var Ae=function(){try{return require("path")}catch{}}()||{sep:"/"};B.sep=Ae.sep;var Lt=B.GLOBSTAR=j.GLOBSTAR={},_o=mn(),gn={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},xt="[^/]",Ut=xt+"*?",yo="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",bo="(?:(?!(?:\\/|^)\\.).)*?",vn=wo("().*{}+?[]^$\\!");function wo(e){return e.split("").reduce(function(t,r){return t[r]=!0,t},{})}var _n=/\/+/;B.filter=Oo;function Oo(e,t){return t=t||{},function(r,n,i){return B(r,e,t)}}function se(e,t){t=t||{};var r={};return Object.keys(e).forEach(function(n){r[n]=e[n]}),Object.keys(t).forEach(function(n){r[n]=t[n]}),r}B.defaults=function(e){if(!e||typeof e!="object"||!Object.keys(e).length)return B;var t=B,r=function(i,s,o){return t(i,s,se(e,o))};return r.Minimatch=function(i,s){return new t.Minimatch(i,se(e,s))},r.Minimatch.defaults=function(i){return t.defaults(se(e,i)).Minimatch},r.filter=function(i,s){return t.filter(i,se(e,s))},r.defaults=function(i){return t.defaults(se(e,i))},r.makeRe=function(i,s){return t.makeRe(i,se(e,s))},r.braceExpand=function(i,s){return t.braceExpand(i,se(e,s))},r.match=function(n,i,s){return t.match(n,i,se(e,s))},r};j.defaults=function(e){return B.defaults(e).Minimatch};function B(e,t,r){return Ze(t),r||(r={}),!r.nocomment&&t.charAt(0)==="#"?!1:new j(t,r).match(e)}function j(e,t){if(!(this instanceof j))return new j(e,t);Ze(e),t||(t={}),e=e.trim(),!t.allowWindowsEscape&&Ae.sep!=="/"&&(e=e.split(Ae.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}j.prototype.debug=function(){};j.prototype.make=So;function So(){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(_n)}),this.debug(this.pattern,r),r=r.map(function(n,i,s){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}j.prototype.parseNegate=Eo;function Eo(){var e=this.pattern,t=!1,r=this.options,n=0;if(!r.nonegate){for(var i=0,s=e.length;i<s&&e.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}}B.braceExpand=function(e,t){return yn(e,t)};j.prototype.braceExpand=yn;function yn(e,t){return t||(this instanceof j?t=this.options:t={}),e=typeof e>"u"?this.pattern:e,Ze(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:_o(e)}var Po=1024*64,Ze=function(e){if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>Po)throw new TypeError("pattern is too long")};j.prototype.parse=Ro;var Ye={};function Ro(e,t){Ze(e);var r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Lt;if(e==="")return"";var n="",i=!!r.nocase,s=!1,o=[],c=[],l,a=!1,u=-1,f=-1,p=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",g=this;function w(){if(l){switch(l){case"*":n+=Ut,i=!0;break;case"?":n+=xt,i=!0;break;default:n+="\\"+l;break}g.debug("clearStateChar %j %j",l,n),l=!1}}for(var b=0,L=e.length,O;b<L&&(O=e.charAt(b));b++){if(this.debug("%s	%s %s %j",e,b,n,O),s&&vn[O]){n+="\\"+O,s=!1;continue}switch(O){case"/":return!1;case"\\":w(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,b,n,O),a){this.debug("  in class"),O==="!"&&b===f+1&&(O="^"),n+=O;continue}g.debug("call clearStateChar %j",l),w(),l=O,r.noext&&w();continue;case"(":if(a){n+="(";continue}if(!l){n+="\\(";continue}o.push({type:l,start:b-1,reStart:n.length,open:gn[l].open,close:gn[l].close}),n+=l==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",l,n),l=!1;continue;case")":if(a||!o.length){n+="\\)";continue}w(),i=!0;var R=o.pop();n+=R.close,R.type==="!"&&c.push(R),R.reEnd=n.length;continue;case"|":if(a||!o.length||s){n+="\\|",s=!1;continue}w(),n+="|";continue;case"[":if(w(),a){n+="\\"+O;continue}a=!0,f=b,u=n.length,n+=O;continue;case"]":if(b===f+1||!a){n+="\\"+O,s=!1;continue}var K=e.substring(f+1,b);try{RegExp("["+K+"]")}catch{var M=this.parse(K,Ye);n=n.substr(0,u)+"\\["+M[0]+"\\]",i=i||M[1],a=!1;continue}i=!0,a=!1,n+=O;continue;default:w(),s?s=!1:vn[O]&&!(O==="^"&&a)&&(n+="\\"),n+=O}}for(a&&(K=e.substr(f+1),M=this.parse(K,Ye),n=n.substr(0,u)+"\\["+M[0],i=i||M[1]),R=o.pop();R;R=o.pop()){var ee=n.slice(R.reStart+R.open.length);this.debug("setting tail",n,R),ee=ee.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Qt,Yt,at){return at||(at="\\"),Yt+Yt+at+"|"}),this.debug(`tail=%j
   %s`,ee,ee,R,n);var $e=R.type==="*"?Ut:R.type==="?"?xt:"\\"+R.type;i=!0,n=n.slice(0,R.reStart)+$e+"\\("+ee}w(),s&&(n+="\\\\");var pe=!1;switch(n.charAt(0)){case"[":case".":case"(":pe=!0}for(var ce=c.length-1;ce>-1;ce--){var Y=c[ce],Ce=n.slice(0,Y.reStart),it=n.slice(Y.reStart,Y.reEnd-8),zt=n.slice(Y.reEnd-8,Y.reEnd),Ee=n.slice(Y.reEnd);zt+=Ee;var Fn=Ce.split("(").length-1,st=Ee;for(b=0;b<Fn;b++)st=st.replace(/\)[+*?]?/,"");Ee=st;var Jt="";Ee===""&&t!==Ye&&(Jt="$");var Vn=Ce+it+Ee+Jt+zt;n=Vn}if(n!==""&&i&&(n="(?=.)"+n),pe&&(n=p+n),t===Ye)return[n,i];if(!i)return jo(e);var Gn=r.nocase?"i":"";try{var ot=new RegExp("^"+n+"$",Gn)}catch{return new RegExp("$.")}return ot._glob=e,ot._src=n,ot}B.makeRe=function(e,t){return new j(e,t||{}).makeRe()};j.prototype.makeRe=Ao;function Ao(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?Ut:t.dot?yo:bo,n=t.nocase?"i":"",i=e.map(function(s){return s.map(function(o){return o===Lt?r:typeof o=="string"?Mo(o):o._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}B.match=function(e,t,r){r=r||{};var n=new j(t,r);return e=e.filter(function(i){return n.match(i)}),n.options.nonull&&!e.length&&e.push(t),e};j.prototype.match=function(t,r){if(typeof r>"u"&&(r=this.partial),this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&r)return!0;var n=this.options;Ae.sep!=="/"&&(t=t.split(Ae.sep).join("/")),t=t.split(_n),this.debug(this.pattern,"split",t);var i=this.set;this.debug(this.pattern,"set",i);var s,o;for(o=t.length-1;o>=0&&(s=t[o],!s);o--);for(o=0;o<i.length;o++){var c=i[o],l=t;n.matchBase&&c.length===1&&(l=[s]);var a=this.matchOne(l,c,r);if(a)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};j.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,s=0,o=e.length,c=t.length;i<o&&s<c;i++,s++){this.debug("matchOne loop");var l=t[s],a=e[i];if(this.debug(t,l,a),l===!1)return!1;if(l===Lt){this.debug("GLOBSTAR",[t,l,a]);var u=i,f=s+1;if(f===c){for(this.debug("** at the end");i<o;i++)if(e[i]==="."||e[i]===".."||!n.dot&&e[i].charAt(0)===".")return!1;return!0}for(;u<o;){var p=e[u];if(this.debug(`
globstar while`,e,u,t,f,p),this.matchOne(e.slice(u),t.slice(f),r))return this.debug("globstar found match!",u,o,p),!0;if(p==="."||p===".."||!n.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,u,t,f);break}this.debug("globstar swallow a segment, and continue"),u++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,u,t,f),u===o))}var g;if(typeof l=="string"?(g=a===l,this.debug("string match",l,a,g)):(g=a.match(l),this.debug("pattern match",l,a,g)),!g)return!1}if(i===o&&s===c)return!0;if(i===o)return r;if(s===c)return i===o-1&&e[i]==="";throw new Error("wtf?")};function jo(e){return e.replace(/\\(.)/g,"$1")}function Mo(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var Sn=v(G=>{"use strict";var To=G&&G.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Do=G&&G.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),On=G&&G.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&To(t,e,r);return Do(t,e),t},qo=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(G,"__esModule",{value:!0});G.Path=void 0;var je=On(require("path")),oe=On(ze()),Me=qo(require("assert")),$o=process.platform==="win32",Bt=class{constructor(t){if(this.segments=[],typeof t=="string")if((0,Me.default)(t,"Parameter 'itemPath' must not be empty"),t=oe.safeTrimTrailingSeparator(t),!oe.hasRoot(t))this.segments=t.split(je.sep);else{let r=t,n=oe.dirname(r);for(;n!==r;){let i=je.basename(r);this.segments.unshift(i),r=n,n=oe.dirname(r)}this.segments.unshift(r)}else{(0,Me.default)(t.length>0,"Parameter 'itemPath' must not be an empty array");for(let r=0;r<t.length;r++){let n=t[r];(0,Me.default)(n,"Parameter 'itemPath' must not contain any empty segments"),n=oe.normalizeSeparators(t[r]),r===0&&oe.hasRoot(n)?(n=oe.safeTrimTrailingSeparator(n),(0,Me.default)(n===oe.dirname(n),"Parameter 'itemPath' root segment contains information for multiple segments"),this.segments.push(n)):((0,Me.default)(!n.includes(je.sep),"Parameter 'itemPath' contains unexpected path separators"),this.segments.push(n))}}}toString(){let t=this.segments[0],r=t.endsWith(je.sep)||$o&&/^[A-Z]:$/i.test(t);for(let n=1;n<this.segments.length;n++)r?r=!1:t+=je.sep,t+=this.segments[n];return t}};G.Path=Bt});var En=v(H=>{"use strict";var Co=H&&H.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),No=H&&H.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Vt=H&&H.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Co(t,e,r);return No(t,e),t},Io=H&&H.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(H,"__esModule",{value:!0});H.Pattern=void 0;var xo=Vt(require("os")),Te=Vt(require("path")),x=Vt(ze()),he=Io(require("assert")),Uo=wn(),Wt=Qe(),Xe=Sn(),X=process.platform==="win32",Ft=class e{constructor(t,r=!1,n,i){this.negate=!1;let s;if(typeof t=="string")s=t.trim();else{n=n||[],(0,he.default)(n.length,"Parameter 'segments' must not empty");let a=e.getLiteral(n[0]);(0,he.default)(a&&x.hasAbsoluteRoot(a),"Parameter 'segments' first element must be a root path"),s=new Xe.Path(n).toString().trim(),t&&(s=`!${s}`)}for(;s.startsWith("!");)this.negate=!this.negate,s=s.substr(1).trim();s=e.fixupPattern(s,i),this.segments=new Xe.Path(s).segments,this.trailingSeparator=x.normalizeSeparators(s).endsWith(Te.sep),s=x.safeTrimTrailingSeparator(s);let o=!1,c=this.segments.map(a=>e.getLiteral(a)).filter(a=>!o&&!(o=a===""));this.searchPath=new Xe.Path(c).toString(),this.rootRegExp=new RegExp(e.regExpEscape(c[0]),X?"i":""),this.isImplicitPattern=r;let l={dot:!0,nobrace:!0,nocase:X,nocomment:!0,noext:!0,nonegate:!0};s=X?s.replace(/\\/g,"/"):s,this.minimatch=new Uo.Minimatch(s,l)}match(t){return this.segments[this.segments.length-1]==="**"?(t=x.normalizeSeparators(t),!t.endsWith(Te.sep)&&this.isImplicitPattern===!1&&(t=`${t}${Te.sep}`)):t=x.safeTrimTrailingSeparator(t),this.minimatch.match(t)?this.trailingSeparator?Wt.MatchKind.Directory:Wt.MatchKind.All:Wt.MatchKind.None}partialMatch(t){return t=x.safeTrimTrailingSeparator(t),x.dirname(t)===t?this.rootRegExp.test(t):this.minimatch.matchOne(t.split(X?/\\+/:/\/+/),this.minimatch.set[0],!0)}static globEscape(t){return(X?t:t.replace(/\\/g,"\\\\")).replace(/(\[)(?=[^/]+\])/g,"[[]").replace(/\?/g,"[?]").replace(/\*/g,"[*]")}static fixupPattern(t,r){(0,he.default)(t,"pattern cannot be empty");let n=new Xe.Path(t).segments.map(i=>e.getLiteral(i));if((0,he.default)(n.every((i,s)=>(i!=="."||s===0)&&i!==".."),`Invalid pattern '${t}'. Relative pathing '.' and '..' is not allowed.`),(0,he.default)(!x.hasRoot(t)||n[0],`Invalid pattern '${t}'. Root segment must not contain globs.`),t=x.normalizeSeparators(t),t==="."||t.startsWith(`.${Te.sep}`))t=e.globEscape(process.cwd())+t.substr(1);else if(t==="~"||t.startsWith(`~${Te.sep}`))r=r||xo.homedir(),(0,he.default)(r,"Unable to determine HOME directory"),(0,he.default)(x.hasAbsoluteRoot(r),`Expected HOME directory to be a rooted path. Actual '${r}'`),t=e.globEscape(r)+t.substr(1);else if(X&&(t.match(/^[A-Z]:$/i)||t.match(/^[A-Z]:[^\\]/i))){let i=x.ensureAbsoluteRoot("C:\\dummy-root",t.substr(0,2));t.length>2&&!i.endsWith("\\")&&(i+="\\"),t=e.globEscape(i)+t.substr(2)}else if(X&&(t==="\\"||t.match(/^\\[^\\]/))){let i=x.ensureAbsoluteRoot("C:\\dummy-root","\\");i.endsWith("\\")||(i+="\\"),t=e.globEscape(i)+t.substr(1)}else t=x.ensureAbsoluteRoot(e.globEscape(process.cwd()),t);return x.normalizeSeparators(t)}static getLiteral(t){let r="";for(let n=0;n<t.length;n++){let i=t[n];if(i==="\\"&&!X&&n+1<t.length){r+=t[++n];continue}else{if(i==="*"||i==="?")return"";if(i==="["&&n+1<t.length){let s="",o=-1;for(let c=n+1;c<t.length;c++){let l=t[c];if(l==="\\"&&!X&&c+1<t.length){s+=t[++c];continue}else if(l==="]"){o=c;break}else s+=l}if(o>=0){if(s.length>1)return"";if(s){r+=s,n=o;continue}}}}r+=i}return r}static regExpEscape(t){return t.replace(/[[\\^$.|?*+()]/g,"\\$&")}};H.Pattern=Ft});var Pn=v(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.SearchState=void 0;var Gt=class{constructor(t,r){this.path=t,this.level=r}};et.SearchState=Gt});var Dn=v(A=>{"use strict";var Lo=A&&A.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Bo=A&&A.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),qe=A&&A.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Lo(t,e,r);return Bo(t,e),t},Ht=A&&A.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})},Wo=A&&A.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(c,l){o=e[s](o),i(c,l,o.done,o.value)})}}function i(s,o,c,l){Promise.resolve(l).then(function(a){s({value:a,done:c})},o)}},ae=A&&A.__await||function(e){return this instanceof ae?(this.v=e,this):new ae(e)},Fo=A&&A.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(g){return new Promise(function(w,b){s.push([p,g,w,b])>1||c(p,g)})})}function c(p,g){try{l(n[p](g))}catch(w){f(s[0][3],w)}}function l(p){p.value instanceof ae?Promise.resolve(p.value.v).then(a,u):f(s[0][2],p)}function a(p){c("next",p)}function u(p){c("throw",p)}function f(p,g){p(g),s.shift(),s.length&&c(s[0][0],s[0][1])}};Object.defineProperty(A,"__esModule",{value:!0});A.DefaultGlobber=void 0;var kt=qe(ye()),De=qe(require("fs")),Rn=qe(Jr()),An=qe(require("path")),tt=qe(Xr()),jn=Qe(),Mn=En(),Tn=Pn(),Vo=process.platform==="win32",Kt=class e{constructor(t){this.patterns=[],this.searchPaths=[],this.options=Rn.getOptions(t)}getSearchPaths(){return this.searchPaths.slice()}glob(){var t,r,n,i;return Ht(this,void 0,void 0,function*(){let s=[];try{for(var o=!0,c=Wo(this.globGenerator()),l;l=yield c.next(),t=l.done,!t;o=!0){i=l.value,o=!1;let a=i;s.push(a)}}catch(a){r={error:a}}finally{try{!o&&!t&&(n=c.return)&&(yield n.call(c))}finally{if(r)throw r.error}}return s})}globGenerator(){return Fo(this,arguments,function*(){let r=Rn.getOptions(this.options),n=[];for(let o of this.patterns)n.push(o),r.implicitDescendants&&(o.trailingSeparator||o.segments[o.segments.length-1]!=="**")&&n.push(new Mn.Pattern(o.negate,!0,o.segments.concat("**")));let i=[];for(let o of tt.getSearchPaths(n)){kt.debug(`Search path '${o}'`);try{yield ae(De.promises.lstat(o))}catch(c){if(c.code==="ENOENT")continue;throw c}i.unshift(new Tn.SearchState(o,1))}let s=[];for(;i.length;){let o=i.pop(),c=tt.match(n,o.path),l=!!c||tt.partialMatch(n,o.path);if(!c&&!l)continue;let a=yield ae(e.stat(o,r,s));if(a&&!(r.excludeHiddenFiles&&An.basename(o.path).match(/^\./)))if(a.isDirectory()){if(c&jn.MatchKind.Directory&&r.matchDirectories)yield yield ae(o.path);else if(!l)continue;let u=o.level+1,f=(yield ae(De.promises.readdir(o.path))).map(p=>new Tn.SearchState(An.join(o.path,p),u));i.push(...f.reverse())}else c&jn.MatchKind.File&&(yield yield ae(o.path))}})}static create(t,r){return Ht(this,void 0,void 0,function*(){let n=new e(r);Vo&&(t=t.replace(/\r\n/g,`
`),t=t.replace(/\r/g,`
`));let i=t.split(`
`).map(s=>s.trim());for(let s of i)!s||s.startsWith("#")||n.patterns.push(new Mn.Pattern(s));return n.searchPaths.push(...tt.getSearchPaths(n.patterns)),n})}static stat(t,r,n){return Ht(this,void 0,void 0,function*(){let i;if(r.followSymbolicLinks)try{i=yield De.promises.stat(t.path)}catch(s){if(s.code==="ENOENT"){if(r.omitBrokenSymbolicLinks){kt.debug(`Broken symlink '${t.path}'`);return}throw new Error(`No information found for the path '${t.path}'. This may indicate a broken symbolic link.`)}throw s}else i=yield De.promises.lstat(t.path);if(i.isDirectory()&&r.followSymbolicLinks){let s=yield De.promises.realpath(t.path);for(;n.length>=t.level;)n.pop();if(n.some(o=>o===s)){kt.debug(`Symlink cycle detected for path '${t.path}' and realpath '${s}'`);return}n.push(s)}return i})}};A.DefaultGlobber=Kt});var Nn=v(U=>{"use strict";var Go=U&&U.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ho=U&&U.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Se=U&&U.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Go(t,e,r);return Ho(t,e),t},ko=U&&U.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})},Ko=U&&U.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(c,l){o=e[s](o),i(c,l,o.done,o.value)})}}function i(s,o,c,l){Promise.resolve(l).then(function(a){s({value:a,done:c})},o)}};Object.defineProperty(U,"__esModule",{value:!0});U.hashFiles=void 0;var qn=Se(require("crypto")),$n=Se(ye()),Cn=Se(require("fs")),zo=Se(require("stream")),Jo=Se(require("util")),Qo=Se(require("path"));function Yo(e,t,r=!1){var n,i,s,o,c;return ko(this,void 0,void 0,function*(){let l=r?$n.info:$n.debug,a=!1,u=t||((c=process.env.GITHUB_WORKSPACE)!==null&&c!==void 0?c:process.cwd()),f=qn.createHash("sha256"),p=0;try{for(var g=!0,w=Ko(e.globGenerator()),b;b=yield w.next(),n=b.done,!n;g=!0){o=b.value,g=!1;let L=o;if(l(L),!L.startsWith(`${u}${Qo.sep}`)){l(`Ignore '${L}' since it is not under GITHUB_WORKSPACE.`);continue}if(Cn.statSync(L).isDirectory()){l(`Skip directory '${L}'.`);continue}let O=qn.createHash("sha256");yield Jo.promisify(zo.pipeline)(Cn.createReadStream(L),O),f.write(O.digest()),p++,a||(a=!0)}}catch(L){i={error:L}}finally{try{!g&&!n&&(s=w.return)&&(yield s.call(w))}finally{if(i)throw i.error}}return f.end(),a?(l(`Found ${p} files to hash.`),f.digest("hex")):(l("No matches found for glob"),"")})}U.hashFiles=Yo});var Un=v(ue=>{"use strict";var In=ue&&ue.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?s(u.value):i(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(ue,"__esModule",{value:!0});ue.hashFiles=ue.create=void 0;var Zo=Dn(),Xo=Nn();function xn(e,t){return In(this,void 0,void 0,function*(){return yield Zo.DefaultGlobber.create(e,t)})}ue.create=xn;function ea(e,t="",r,n=!1){return In(this,void 0,void 0,function*(){let i=!0;r&&typeof r.followSymbolicLinks=="boolean"&&(i=r.followSymbolicLinks);let s=yield xn(e,{followSymbolicLinks:i});return(0,Xo.hashFiles)(s,t,n)})}ue.hashFiles=ea});var de=Xt(ye(),1),nt=require("fs/promises");var Ln=Xt(Un(),1),Bn=async e=>await(await(0,Ln.create)(e,{matchDirectories:!1})).glob();var ta=(0,de.getInput)("input",{required:!0}),ra=(0,de.getInput)("substitutionRegex",{required:!0}),na=(0,de.getInput)("substitutionData",{required:!0}),ia=(0,de.getInput)("throwOnDataMissing",{required:!1})==="true",sa=new RegExp(ra,"gm"),Wn=JSON.parse(na),rt=new Map,oa=e=>(t,r)=>{if(Wn[r]==null){if(ia)throw new Error(`No substitution data for ${r}`);return console.warn(`No substitution data for ${r}`),t}return rt.set(e,(rt.get(e)??0)+1),Wn[r]};async function aa(){let e=await Bn(ta);if(e.length===0){console.warn("No files found to process");return}console.log("Found",e.length,"files to process"),await Promise.all(e.map(async t=>{let n=(await(0,nt.readFile)(t,"utf8")).replace(sa,oa(t));await(0,nt.writeFile)(t,n),rt.has(t)&&console.log(`Replaced ${rt.get(t)} matches in ${t}`)}))}aa().then(()=>{console.log("done")}).catch(e=>(0,de.setFailed)(e.message));
//# sourceMappingURL=index.cjs.map
